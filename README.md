# Telegram Shop Bot (aiogram v3) — подробная инструкция
Кодировка файла: UTF-8.

Это Telegram-бот магазина с оплатой по фото, админ-группой и поддержкой через группу.
Товары штучные: один товар можно купить только один раз.

## Быстрый старт
1. Создайте venv и активируйте:
```powershell
cd d:\botdone
python -m venv venv
.\venv\Scripts\activate
```
2. Установите зависимости:
```powershell
pip install aiogram aiosqlite
```
3. Заполните .env:
```
BOT_TOKEN=ВАШ_ТОКЕН_БОТА
ADMIN_IDS=873275713
ADMIN_GROUP_ID=-1003777622502
```
4. Запуск:
```powershell
python main.py
```

## Пользовательский сценарий
1. /start
2. Выбрать город → местность → вариант → классификацию
3. Нажать на товар (если «нет в наличии» — купить нельзя)
4. Корзина → Оформить → Оплатить и отправить фото
5. После подтверждения оплаты админом — выдача товара

## Поддержка
- Доступна только после первой покупки.
- Обращения уходят в админ-группу.
- Ответ админа реплаем в группе — ответ уходит пользователю.

## Админ-панель (группа)
Команда: /admin
Кнопки: Добавить товар, Переименовать город, Переименовать товар, Фото варианта, История покупок, Отзывы, Кто купил товар, Заявки, Статистика

## База данных
Файл: data/shop.db
Таблицы: users, cities, areas, products, cart_items, orders, order_items, payments, reviews, support_threads

## Логи
Файл: logs/bot.log

## Проблемы
- Бот не видит группу — нужно добавить бота в админы.
- Поддержка не открвается — purchases_count = 0.

## Проверка
```powershell
python -m py_compile main.py app\config.py app\db\database.py app\handlers\user.py app\handlers\admin.py app\services\catalog.py
```
